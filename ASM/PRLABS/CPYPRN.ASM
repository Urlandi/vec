;Лабораторная работа выполнена Васильевым Михаилом - ИВТ 262
;Задать строку из 5 символов, если код символа больше 65 вывести не принтер

        .MODEL TINY          ;.COM файл
        .DATA                ;Сегмент данных

OUTPRN  DB 'ASM',10,13       ;Данные для вывода

        .CODE                ;Сегмент кода
        .STARTUP             ;Точка входа

        MOV SI,OFFSET OUTPRN ;Адрес строки для вывода
        MOV CL,5             ;Количество элементов в строке

CONT:   MOV AL,[SI]          ;Выбираем элемент
        CMP AL,65            ;Проверяем если код ASCII < 65
        JB NPRN              ;Переходим к следующему
        CALL _PRINT          ;Иначе печатаем

NPRN:   INC SI               ;Следующий элемент
        DEC CL               ;Сколько осталось
        JNZ CONT             ;Если не 0 повторяем

        RET                  ;Иначе выход из программы

_PRINT  PROC                 ;Процедура печати

        PUSH AX              ;В AL символ для печати

        MOV DX,0379          ;Порт состояния принтера
BS:     IN AL,DX             ;Читаем байт состояния
        TEST AL,10000000B    ;Если не готов
        JZ BS                ;Повторяем чтение

        MOV DX,037BH         ;Регистр режима
        MOV AL,10000000B     ;Режим простого обмена через порт А
        OUT DX,AL            ;Установить

        POP AX               ;В AL символ для печати
        MOV DX,0378H         ;Порт вывода данных
        OUT DX,AL            ;Вывод

        INC DX               ;Регистр управления
        INC DX

        MOV AL,00001101B
;                  │││└───── Сигнал передачи
;                  ││└────── Автоматический перевод строки
;                  │└─────── Инциализация порта
;                  └──────── Обмен с принтером
        OUT DX,AL            ;Установить
        XOR AL,1             ;Сбросить сигнал передачи
        OUT DX,AL            ;Установить

        RET                  ;Завершить процедуру
_PRINT  ENDP                 ;Конец процедуры печати

END                          ;Конец программе